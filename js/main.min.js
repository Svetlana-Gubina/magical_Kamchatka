"use strict";!function(){const e=document.querySelector(".main-nav__toggle"),t=document.querySelector(".main-nav__list"),i=i=>{i.matches?(t.classList.add("visually-hidden"),e.classList.remove("visually-hidden")):(t.classList.remove("visually-hidden"),e.classList.add("visually-hidden"))},n=window.matchMedia("(max-width:"+"1024px".toString());n.addListener(i),i(n),e.addEventListener("click",(function(e){e.preventDefault(),this.classList.toggle("main-nav__toggle-close"),t.classList.toggle("visually-hidden")}))}(),function(){const e=document.querySelector(".slider__slide-cancel"),t=document.querySelector(".gallery__list"),i=document.querySelector(".slider"),n=document.querySelectorAll(".gallery__thumbnail"),s=document.querySelector(".slider__preview"),l=document.querySelector(".slider__cancel"),c=document.querySelector(".slider__count-num"),d=document.querySelector(".slider__count-total");e.addEventListener("click",(function(e){e.preventDefault(),this.closest(".slider__slide-title").classList.add("hidden")}));const r=new class{constructor(e){this._element=null,this._slides=e,this._slidesMarkup=(e=>Array.from(e).map(e=>'\n     <div>\n     <img src="img/'.concat(e.dataset.number,'.jpg" width="480" height="391" alt="Ducks">\n     </div>').trim()).join(""))(this._slides)}getTemplate(){return"".concat(this._slidesMarkup)}getElement(){return this._element||(this._element=((e,t)=>{const i=document.createElement("div");return i.innerHTML=e,i.classList.add(t),i})(this.getTemplate(),"slick")),this._element}removeElement(){return this._element&&(this._element=null),this._element}show(){this._element&&this._element.classList.remove("hidden")}hide(){this._element&&this._element.classList.add("hidden")}}(n),o=function(){var e;i.classList.add("hidden"),(e=r).getElement().remove(),e.removeElement(),$(".slick").slick("unslick")},a=e=>{"Escape"===e.key&&o()},u=e=>{let t=e.target,u=Number(t.dataset.number)-1;i.classList.remove("hidden"),s.prepend(r.getElement()),c.textContent=u+1,d.textContent=n.length,$(".slick").on("init",(function(){})),$(".slick").slick({initialSlide:u,prevArrow:$(".slider__previous"),nextArrow:$(".slider__next"),infinite:!1,speed:500,slidesToShow:1,adaptiveHeight:!0}),$(".slick").on("afterChange",(function(){const e=$(".slick").slick("slickCurrentSlide");c.textContent=e+1})),$(".slick").on("click",(function(){$(".slick").slick("slickNext")})),document.addEventListener("keydown",a),l.addEventListener("click",o),i.classList.contains("hidden")&&(l.removeEventListener("click",hideBigPicture),document.removeEventListener("keydown",a))};t.addEventListener("click",(function(e){e.preventDefault(),e.target.classList.contains("gallery__thumbnail")&&u(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidG9nZ2xlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWVudSIsImhhbmRsZUJyZWFja3BvaW50Q2hhbmdlIiwiZXZlbnQiLCJtYXRjaGVzIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibWVkaWFRdWVyeUxpc3QiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwidG9TdHJpbmciLCJhZGRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInRoaXMiLCJ0aXRsZUNhbmNlbCIsImdhbGxlcnlMaXN0Iiwic2xpZGVyIiwic2xpZGVzIiwicXVlcnlTZWxlY3RvckFsbCIsInByZXZpZXciLCJzbGlkZXJDYW5jZWwiLCJzbGlkZXJDb3VudE51bSIsInNsaWRlckNvdW50VG90YWwiLCJjbG9zZXN0Iiwic2xpZGVyRWxlbWVudCIsImNvbnN0cnVjdG9yIiwiX2VsZW1lbnQiLCJfc2xpZGVzIiwiX3NsaWRlc01hcmt1cCIsIkFycmF5IiwiZnJvbSIsIm1hcCIsInNsaWRlIiwiY29uY2F0IiwiZGF0YXNldCIsIm51bWJlciIsInRyaW0iLCJqb2luIiwiY3JlYXRlU2xpZGVzTWFya3VwIiwiZ2V0VGVtcGxhdGUiLCJnZXRFbGVtZW50IiwidGVtcGxhdGUiLCJjbGFzc05hbWUiLCJuZXdFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInJlbW92ZUVsZW1lbnQiLCJzaG93IiwiaGlkZSIsImhpZGVTbGlkZXIiLCJjb21wb25lbnQiLCIkIiwic2xpY2siLCJvbkVzY1ByZXNzU2xpZGVyQ2xvc2UiLCJrZXkiLCJwaWN0dXJlQ2xpY2tIYW5kbGVyIiwicGljdHVyZSIsInRhcmdldCIsIm51bSIsIk51bWJlciIsInByZXBlbmQiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIm9uIiwiaW5pdGlhbFNsaWRlIiwicHJldkFycm93IiwibmV4dEFycm93IiwiaW5maW5pdGUiLCJzcGVlZCIsInNsaWRlc1RvU2hvdyIsImFkYXB0aXZlSGVpZ2h0IiwiY3VycmVudFNsaWRlIiwiY29udGFpbnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGlkZUJpZ1BpY3R1cmUiXSwibWFwcGluZ3MiOiJBQUFBLGNBQ0EsV0FDRSxNQUlNQSxFQUFTQyxTQUFTQyxjQUFjLHFCQUNoQ0MsRUFBT0YsU0FBU0MsY0FBYyxtQkFFOUJFLEVBQTJCQyxJQUMzQkEsRUFBTUMsU0FDUkgsRUFBS0ksVUFBVUMsSUFBSSxtQkFDbkJSLEVBQU9PLFVBQVVFLE9BQU8scUJBRXhCTixFQUFLSSxVQUFVRSxPQUFPLG1CQUN0QlQsRUFBT08sVUFBVUMsSUFBSSxxQkFJbkJFLEVBQWlCQyxPQUFPQyxXQUM1QixjQWpCUSxTQWlCMkJDLFlBRXJDSCxFQUFlSSxZQUFZVixHQUMzQkEsRUFBd0JNLEdBRXhCVixFQUFPZSxpQkFBaUIsU0FBUyxTQUFVQyxHQUN6Q0EsRUFBSUMsaUJBQ0pDLEtBQUtYLFVBQVVQLE9BQU8sMEJBQ3RCRyxFQUFLSSxVQUFVUCxPQUFPLHNCQTNCMUIsR0ErQkEsV0FDRSxNQUNNbUIsRUFBY2xCLFNBQVNDLGNBQWMseUJBQ3JDa0IsRUFBY25CLFNBQVNDLGNBQWMsa0JBQ3JDbUIsRUFBU3BCLFNBQVNDLGNBQWMsV0FDaENvQixFQUFTckIsU0FBU3NCLGlCQUFpQix1QkFDbkNDLEVBQVV2QixTQUFTQyxjQUFjLG9CQUNqQ3VCLEVBQWV4QixTQUFTQyxjQUFjLG1CQUN0Q3dCLEVBQWlCekIsU0FBU0MsY0FBYyxzQkFDeEN5QixFQUFtQjFCLFNBQVNDLGNBQWMsd0JBeUJoRGlCLEVBQVlKLGlCQUFpQixTQUFTLFNBQVVDLEdBQzlDQSxFQUFJQyxpQkFDSkMsS0FBS1UsUUFBUSx3QkFBd0JyQixVQUFVQyxJQUFJLGFBeUNyRCxNQUFNcUIsRUFBZ0IsSUF0Q3RCLE1BQ0VDLFlBQVlSLEdBQ1ZKLEtBQUthLFNBQVcsS0FDaEJiLEtBQUtjLFFBQVVWLEVBQ2ZKLEtBQUtlLGNBcEJtQlgsQ0FBQUEsR0FDbkJZLE1BQU1DLEtBQUtiLEdBQ2ZjLElBQUtDLEdBQ0osb0NBQUFDLE9BRWFELEVBQU1FLFFBQVFDLE9BRjNCLDREQUdLQyxRQUVOQyxLQVBJLElBbUJnQkMsQ0FBbUJ6QixLQUFLYyxTQUcvQ1ksY0FDRSxNQUFBLEdBQUFOLE9BQVVwQixLQUFLZSxlQUdqQlksYUFJRSxPQUhLM0IsS0FBS2EsV0FDUmIsS0FBS2EsU0F6Q1csRUFBQ2UsRUFBVUMsS0FDL0IsTUFBTUMsRUFBYS9DLFNBQVNnRCxjQUFULE9BR25CLE9BRkFELEVBQVdFLFVBQVlKLEVBQ3ZCRSxFQUFXekMsVUFBVUMsSUFBSXVDLEdBQ2xCQyxHQXFDYUMsQ0FBYy9CLEtBQUswQixjQUFlLFVBRTdDMUIsS0FBS2EsU0FHZG9CLGdCQUlFLE9BSElqQyxLQUFLYSxXQUNQYixLQUFLYSxTQUFXLE1BRVhiLEtBQUthLFNBR2RxQixPQUNNbEMsS0FBS2EsVUFDUGIsS0FBS2EsU0FBU3hCLFVBQVVFLE9BakVULFVBcUVuQjRDLE9BQ01uQyxLQUFLYSxVQUNQYixLQUFLYSxTQUFTeEIsVUFBVUMsSUF2RVQsWUE0RW1CYyxHQU9sQ2dDLEVBQWEsV0FsRUhDLElBQUFBLEVBbUVkbEMsRUFBT2QsVUFBVUMsSUFBSSxXQW5FUCtDLEVBb0VQMUIsR0FuRUdnQixhQUFhcEMsU0FDdkI4QyxFQUFVSixnQkFtRVZLLEVBQUUsVUFBVUMsTUFBTSxZQUdkQyxFQUF5QjFDLElBQ2IsV0FBWkEsRUFBSTJDLEtBQ05MLEtBSUVNLEVBQXVCNUMsSUFDM0IsSUFBSTZDLEVBQVU3QyxFQUFJOEMsT0FDZEMsRUFBTUMsT0FBT0gsRUFBUXRCLFFBQVFDLFFBQVUsRUFsQjNDbkIsRUFBT2QsVUFBVUUsT0FBTyxVQUN4QmUsRUFBUXlDLFFBQVFwQyxFQUFjZ0IsY0FvQjlCbkIsRUFBZXdDLFlBQWNILEVBQU0sRUFDbkNwQyxFQUFpQnVDLFlBQWM1QyxFQUFPNkMsT0FFdENYLEVBQUUsVUFBVVksR0FBRyxRQUFRLGVBS3ZCWixFQUFFLFVBQVVDLE1BQU0sQ0FDaEJZLGFBQWNOLEVBQ2RPLFVBQVdkLEVBQUUscUJBQ2JlLFVBQVdmLEVBQUUsaUJBQ2JnQixVQUFVLEVBQ1ZDLE1BQU8sSUFDUEMsYUFBYyxFQUNkQyxnQkFBZ0IsSUFHbEJuQixFQUFFLFVBQVVZLEdBQUcsZUFBZSxXQUM1QixNQUFNUSxFQUFlcEIsRUFBRSxVQUFVQyxNQUFNLHFCQUN2Qy9CLEVBQWV3QyxZQUFjVSxFQUFlLEtBRzlDcEIsRUFBRSxVQUFVWSxHQUFHLFNBQVMsV0FDdEJaLEVBQUUsVUFBVUMsTUFBTSxnQkFHcEJ4RCxTQUFTYyxpQkFBaUIsVUFBVzJDLEdBQ3JDakMsRUFBYVYsaUJBQWlCLFFBQVN1QyxHQUVuQ2pDLEVBQU9kLFVBQVVzRSxTQWxJRixZQW1JakJwRCxFQUFhcUQsb0JBQW9CLFFBQVNDLGdCQUMxQzlFLFNBQVM2RSxvQkFBb0IsVUFBV3BCLEtBSTVDdEMsRUFBWUwsaUJBQWlCLFNBQVMsU0FBVUMsR0FDOUNBLEVBQUlDLGlCQUNTRCxFQUFJOEMsT0FDTnZELFVBQVVzRSxTQUFTLHVCQUM1QmpCLEVBQW9CNUMsTUE3STFCIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IEJSRUFLUE9JTlRTID0ge1xuICAgIHRhYmxldDogXCIxMDI0cHhcIixcbiAgfTtcblxuICBjb25zdCB0b2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tbmF2X190b2dnbGVcIik7XG4gIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tbmF2X19saXN0XCIpO1xuXG4gIGNvbnN0IGhhbmRsZUJyZWFja3BvaW50Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50Lm1hdGNoZXMpIHtcbiAgICAgIG1lbnUuY2xhc3NMaXN0LmFkZChcInZpc3VhbGx5LWhpZGRlblwiKTtcbiAgICAgIHRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKFwidmlzdWFsbHktaGlkZGVuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXN1YWxseS1oaWRkZW5cIik7XG4gICAgICB0b2dnbGUuY2xhc3NMaXN0LmFkZChcInZpc3VhbGx5LWhpZGRlblwiKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgbWVkaWFRdWVyeUxpc3QgPSB3aW5kb3cubWF0Y2hNZWRpYShcbiAgICBcIihtYXgtd2lkdGg6XCIgKyBCUkVBS1BPSU5UUy50YWJsZXQudG9TdHJpbmcoKSArIFwiXCJcbiAgKTtcbiAgbWVkaWFRdWVyeUxpc3QuYWRkTGlzdGVuZXIoaGFuZGxlQnJlYWNrcG9pbnRDaGFuZ2UpO1xuICBoYW5kbGVCcmVhY2twb2ludENoYW5nZShtZWRpYVF1ZXJ5TGlzdCk7XG5cbiAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwibWFpbi1uYXZfX3RvZ2dsZS1jbG9zZVwiKTtcbiAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJ2aXN1YWxseS1oaWRkZW5cIik7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgSElEREVOX0NMQVNTID0gXCJoaWRkZW5cIjtcbiAgY29uc3QgdGl0bGVDYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlcl9fc2xpZGUtY2FuY2VsXCIpO1xuICBjb25zdCBnYWxsZXJ5TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbGlzdFwiKTtcbiAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJcIik7XG4gIGNvbnN0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ2FsbGVyeV9fdGh1bWJuYWlsXCIpO1xuICBjb25zdCBwcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX3ByZXZpZXdcIik7XG4gIGNvbnN0IHNsaWRlckNhbmNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19jYW5jZWxcIik7XG4gIGNvbnN0IHNsaWRlckNvdW50TnVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX2NvdW50LW51bVwiKTtcbiAgY29uc3Qgc2xpZGVyQ291bnRUb3RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19jb3VudC10b3RhbFwiKTtcblxuICBjb25zdCBjcmVhdGVFbGVtZW50ID0gKHRlbXBsYXRlLCBjbGFzc05hbWUpID0+IHtcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgZGl2YCk7XG4gICAgbmV3RWxlbWVudC5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICBuZXdFbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICByZXR1cm4gbmV3RWxlbWVudDtcbiAgfTtcblxuICBjb25zdCByZW1vdmUgPSAoY29tcG9uZW50KSA9PiB7XG4gICAgY29tcG9uZW50LmdldEVsZW1lbnQoKS5yZW1vdmUoKTtcbiAgICBjb21wb25lbnQucmVtb3ZlRWxlbWVudCgpO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZVNsaWRlc01hcmt1cCA9IChzbGlkZXMpID0+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShzbGlkZXMpXG4gICAgICAubWFwKChzbGlkZSkgPT5cbiAgICAgICAgYFxuICAgICA8ZGl2PlxuICAgICA8aW1nIHNyYz1cImltZy8ke3NsaWRlLmRhdGFzZXQubnVtYmVyfS5qcGdcIiB3aWR0aD1cIjQ4MFwiIGhlaWdodD1cIjM5MVwiIGFsdD1cIkR1Y2tzXCI+XG4gICAgIDwvZGl2PmAudHJpbSgpXG4gICAgICApXG4gICAgICAuam9pbihgYCk7XG4gIH07XG5cbiAgdGl0bGVDYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmNsb3Nlc3QoXCIuc2xpZGVyX19zbGlkZS10aXRsZVwiKS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICB9KTtcblxuICBjbGFzcyBTbGlkZXJFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzbGlkZXMpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgICAgdGhpcy5fc2xpZGVzID0gc2xpZGVzO1xuICAgICAgdGhpcy5fc2xpZGVzTWFya3VwID0gY3JlYXRlU2xpZGVzTWFya3VwKHRoaXMuX3NsaWRlcyk7XG4gICAgfVxuXG4gICAgZ2V0VGVtcGxhdGUoKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5fc2xpZGVzTWFya3VwfWA7XG4gICAgfVxuXG4gICAgZ2V0RWxlbWVudCgpIHtcbiAgICAgIGlmICghdGhpcy5fZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gY3JlYXRlRWxlbWVudCh0aGlzLmdldFRlbXBsYXRlKCksIFwic2xpY2tcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG5cbiAgICByZW1vdmVFbGVtZW50KCkge1xuICAgICAgaWYgKHRoaXMuX2VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG5cbiAgICBzaG93KCkge1xuICAgICAgaWYgKHRoaXMuX2VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKEhJRERFTl9DTEFTUyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaGlkZSgpIHtcbiAgICAgIGlmICh0aGlzLl9lbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChISURERU5fQ0xBU1MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNsaWRlckVsZW1lbnQgPSBuZXcgU2xpZGVyRWxlbWVudChzbGlkZXMpO1xuXG4gIGNvbnN0IG9wZW5TbGlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2xpZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gICAgcHJldmlldy5wcmVwZW5kKHNsaWRlckVsZW1lbnQuZ2V0RWxlbWVudCgpKTtcbiAgfTtcblxuICBjb25zdCBoaWRlU2xpZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHNsaWRlci5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgIHJlbW92ZShzbGlkZXJFbGVtZW50KTtcbiAgICAkKFwiLnNsaWNrXCIpLnNsaWNrKFwidW5zbGlja1wiKTtcbiAgfTtcblxuICBjb25zdCBvbkVzY1ByZXNzU2xpZGVyQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIGhpZGVTbGlkZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcGljdHVyZUNsaWNrSGFuZGxlciA9IChldnQpID0+IHtcbiAgICBsZXQgcGljdHVyZSA9IGV2dC50YXJnZXQ7XG4gICAgbGV0IG51bSA9IE51bWJlcihwaWN0dXJlLmRhdGFzZXQubnVtYmVyKSAtIDE7XG4gICAgb3BlblNsaWRlcigpO1xuXG4gICAgc2xpZGVyQ291bnROdW0udGV4dENvbnRlbnQgPSBudW0gKyAxO1xuICAgIHNsaWRlckNvdW50VG90YWwudGV4dENvbnRlbnQgPSBzbGlkZXMubGVuZ3RoO1xuXG4gICAgJChcIi5zbGlja1wiKS5vbihcImluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gVE9ETzpcbiAgICAgIC8vIGFkYXB0aXZlSGVpZ2h0XG4gICAgfSk7XG5cbiAgICAkKFwiLnNsaWNrXCIpLnNsaWNrKHtcbiAgICAgIGluaXRpYWxTbGlkZTogbnVtLFxuICAgICAgcHJldkFycm93OiAkKFwiLnNsaWRlcl9fcHJldmlvdXNcIiksXG4gICAgICBuZXh0QXJyb3c6ICQoXCIuc2xpZGVyX19uZXh0XCIpLFxuICAgICAgaW5maW5pdGU6IGZhbHNlLFxuICAgICAgc3BlZWQ6IDUwMCxcbiAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgJChcIi5zbGlja1wiKS5vbihcImFmdGVyQ2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9ICQoXCIuc2xpY2tcIikuc2xpY2soXCJzbGlja0N1cnJlbnRTbGlkZVwiKTtcbiAgICAgIHNsaWRlckNvdW50TnVtLnRleHRDb250ZW50ID0gY3VycmVudFNsaWRlICsgMTtcbiAgICB9KTtcblxuICAgICQoXCIuc2xpY2tcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkKFwiLnNsaWNrXCIpLnNsaWNrKFwic2xpY2tOZXh0XCIpO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgb25Fc2NQcmVzc1NsaWRlckNsb3NlKTtcbiAgICBzbGlkZXJDYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhpZGVTbGlkZXIpO1xuXG4gICAgaWYgKHNsaWRlci5jbGFzc0xpc3QuY29udGFpbnMoSElEREVOX0NMQVNTKSkge1xuICAgICAgc2xpZGVyQ2FuY2VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoaWRlQmlnUGljdHVyZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbkVzY1ByZXNzU2xpZGVyQ2xvc2UpO1xuICAgIH1cbiAgfTtcblxuICBnYWxsZXJ5TGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCB0YXJnZXQgPSBldnQudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ2FsbGVyeV9fdGh1bWJuYWlsXCIpKSB7XG4gICAgICBwaWN0dXJlQ2xpY2tIYW5kbGVyKGV2dCk7XG4gICAgfVxuICB9KTtcbn0pKCk7XG4iXX0=
